{% extends "base.html" %}
{% block content %}
<div class="main-container">
    <h1 class="page-title">Blog</h1>
    <p class="lead mb-4">
        Latest updates and research from the team
    </p>

    <!-- Categories/Tags Filter -->
    <div class="blog-filters">
        <a href="/blog" 
           class="blog-tag {% if not current_tag %}active{% endif %}">
            All Posts
        </a>
        {% for tag, count in all_tags.items() %}
            <a href="/blog?tag={{ tag }}" 
               class="blog-tag {% if tag == current_tag %}active{% endif %}">
                {{ tag }} ({{ count }})
            </a>
        {% endfor %}
    </div>

    <!-- Blog Posts List -->
    {% for post in blog_posts %}
    <article class="blog-post">
        <h2 class="h3">{{ post.title }}</h2>
        <p class="post-meta">
            <strong>Published:</strong> {{ post.date }} 
            <span class="mx-2">|</span> 
            <strong>Author:</strong> {{ post.author }}
        </p>
        
        <div class="post-excerpt">
            {{ post.excerpt }}
        </div>

        <div class="d-flex justify-content-between align-items-center mt-3">
            <div>
                {% for tag in post.tags %}
                    <a href="/blog?tag={{ tag }}" 
                       class="blog-tag">
                        {{ tag }}
                    </a>
                {% endfor %}
            </div>
            
            <a href="{{ url_for('blog.post', slug=post.slug) }}" 
               class="btn btn-primary">
                Read more
            </a>
        </div>
    </article>
    {% endfor %}

    {% if not blog_posts %}
        <div class="text-center mt-4">
            <p class="text-muted">No posts found for this category.</p>
        </div>
    {% endif %}
</div>
{% endblock %}