{% extends "base.html" %}
{% block content %}
<div class="main-container">
    <h1 class="page-title">Blog</h1>
    <p class="lead mb-3">Latest updates and research from the team</p>

    <!-- Categories/Tags Filter -->
    <div class="blog-filters">
        <a href="/blog" class="blog-tag {% if not current_tag %}active{% endif %}">All Posts</a>
        {% for tag, count in all_tags.items() %}
            <a href="/blog?tag={{ tag }}" class="blog-tag {% if tag == current_tag %}active{% endif %}">
                {{ tag }} ({{ count }})
            </a>
        {% endfor %}
    </div>

    <!-- Blog Posts List -->
    {% for post in blog_posts %}
    <article class="blog-post">
        <div class="blog-post-grid">
            <div class="blog-post-content">
                <h2 class="h3 mb-2">{{ post.title }}</h2>
                <p class="post-meta mb-2">
                    {{ post.date }} · {{ post.author }}
                </p>
                
                <div class="post-excerpt">
                    {{ post.excerpt }}
                </div>

                <div class="post-footer">
                    <div class="post-tags">
                        {% for tag in post.tags %}
                            <a href="/blog?tag={{ tag }}" class="blog-tag">{{ tag }}</a>
                        {% endfor %}
                    </div>
                    
                    <a href="{{ url_for('blog.post', slug=post.slug) }}" class="btn-read-more">
                        Read more →
                    </a>
                </div>
            </div>
            
            <div class="blog-post-image">
                {% if post.image %}
                    <img src="{{ post.image }}" alt="{{ post.title }}">
                {% else %}
                    <div class="placeholder-image"></div>
                {% endif %}
            </div>
        </div>
    </article>
    {% endfor %}

    {% if not blog_posts %}
        <div class="text-center mt-3">
            <p class="text-muted">No posts found for this category.</p>
        </div>
    {% endif %}
</div>
{% endblock %}